<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Brayan & Márcia</title>
<style>
:root{--bg:#0e1120;--card:#121733;--muted:#a5b4fc;--text:#e6e6ff;--pink:#ff4dd8;--pink2:#ff8bf1;--accent:#ffd166;--chip:#2a2f55;--ring:#8be9fd;--gold:#ffd875;--gold-2:#ffefb0;}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;color:var(--text);background:radial-gradient(1200px 800px at 50% -200px, #2a1b35 0%, #0e1120 55%) fixed, radial-gradient(1000px 600px at 80% 120%, #1b1d3a 0%, #0e1120 60%) fixed, var(--bg);overflow-x:hidden;}
.hearts{position:fixed;inset:0;pointer-events:none;opacity:.18;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w.org/2000/svg" width="160" height="160" viewBox="0 0 64 64"><path fill="%23ff6bb5" d="M32 55c-1 0-2-.3-2.8-1L12 37.6c-4.6-4.3-4.6-11.4 0-15.7s11.9-4.3 16.5 0l3.5 3.3 3.5-3.3c4.6-4.3 11.9-4.3 16.5 0s4.6 11.4 0 15.7L34.8 54c-.8.7-1.8 1-2.8 1z"/></svg>') repeat;background-size:120px 120px;animation:floaty 28s linear infinite;}
@keyframes floaty{from{background-position:0 0}to{background-position:0 600px}}
header{padding:28px 16px 8px;text-align:center;position:sticky;top:0;z-index:20;background:linear-gradient(180deg, rgba(14,17,32,.9) 60%, rgba(14,17,32,.0));backdrop-filter:blur(6px);}
.title{font-weight:900;letter-spacing:.5px;font-size:clamp(28px, 7vw, 56px);margin:0;color:#ff8cf3;text-shadow:0 0 10px rgba(255,105,220,.6), 0 0 24px rgba(255,105,220,.35), 0 0 42px rgba(255,105,220,.25);position:relative;display:inline-flex;align-items:center;gap:10px;animation:pulseGlow 2.4s ease-in-out infinite;}
@keyframes pulseGlow{0%,100%{filter:drop-shadow(0 0 0px var(--pink))}50%{filter:drop-shadow(0 0 12px var(--pink2))}}
.title .spark{font-size:clamp(22px,5vw,36px);animation:beat 1.6s ease-in-out infinite;filter:drop-shadow(0 0 6px rgba(255,208,246,.8));}
@keyframes beat{0%,100%{transform:scale(1)}50%{transform:scale(1.17)}}
.nav{margin:14px auto 6px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}
.chip{background:linear-gradient(180deg,#2a2f55,#1b2146);border:1px solid rgba(255,255,255,.08);color:#e9e9ff;padding:10px 16px;border-radius:18px;font-weight:700;display:inline-flex;align-items:center;gap:8px;cursor:pointer;text-decoration:none;transition:transform .15s ease, box-shadow .15s ease;position:relative;}
.chip:hover{transform:translateY(-2px);box-shadow:0 8px 18px rgba(0,0,0,.25)}
.chip svg{width:18px;height:18px;opacity:.9}
.chip.active{outline:2px solid rgba(255,141,243,.35);box-shadow:0 0 0 4px rgba(255,141,243,.12) inset}
.chip.bump{animation:bump .28s ease}
@keyframes bump{0%{transform:scale(1)}50%{transform:scale(.94)}100%{transform:scale(1)}}
.heart-pop{position:absolute;left:50%;top:45%;transform:translate(-50%,-50%) scale(.7);pointer-events:none;font-size:18px;filter:drop-shadow(0 0 6px rgba(255,141,243,.65));animation:heartFloat .8s ease-out forwards;}
@keyframes heartFloat{0%{opacity:1;transform:translate(-50%,-40%) scale(.7) rotate(0deg)}60%{transform:translate(-50%,-95%) scale(1) rotate(-8deg)}100%{opacity:0;transform:translate(-50%,-140%) scale(1.15) rotate(8deg)}}
main{max-width:980px;margin:0 auto;padding:10px 14px 120px}
.page{display:none;opacity:0;transform:translateY(8px);transition:opacity .35s ease-in-out, transform .35s ease-in-out;}
.page.active{display:block;opacity:1;transform:none}
.page.leaving{display:block;opacity:0;transform:translateY(8px);transition:opacity .35s ease-in-out, transform .35s ease-in-out}
.section{scroll-margin-top:110px;margin:28px 0}
.h1{font-size:clamp(22px, 6vw, 34px);margin:10px 6px 16px;font-weight:900;text-shadow:0 2px 16px rgba(0,0,0,.45);}
.card{background:linear-gradient(180deg, #141a3a 0%, #0f1430 100%);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.25);}
.center{text-align:center}
.btn{appearance:none;border:0;cursor:pointer;color:#fff;font-weight:800;border-radius:999px;padding:12px 16px;display:inline-flex;align-items:center;gap:10px;background:radial-gradient(120% 120% at 0% 0%, #3c2a66 0%, #2a2f55 55%, #22264a 100%);border:1px solid rgba(255,255,255,.08);}
.btn-ghost{background:transparent;border:1px dashed rgba(255,255,255,.18);}
.slider{position:relative;border-radius:20px;overflow:hidden;background:#0b0f24;border:1px solid rgba(255,255,255,.08);}
.slider .viewport{position:relative;width:100%;height:clamp(220px, 45vw, 380px);background:linear-gradient(180deg,#0b0f24,#0e1330);}
.slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(.98);transition:opacity .65s ease, transform .65s cubic-bezier(.2,.85,.2,1);}
.slide.active{opacity:1;transform:scale(1)}
.slide img{width:100%;height:100%;object-fit:contain;background:radial-gradient(600px 300px at 50% 50%, #1a2046 0%, #0c1028 75%);}
.caption{position:absolute;left:0;right:0;bottom:0;padding:16px;background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(5,7,20,.55) 38%, rgba(5,7,20,.85) 100%);font-weight:900;font-size:clamp(14px, 3.5vw, 20px);}
.arrow{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:999px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);display:grid;place-items:center;cursor:pointer;backdrop-filter:blur(3px);}
.arrow:hover{background:rgba(255,255,255,.18)}
.arrow svg{width:20px;height:20px}
.arrow.left{left:10px}.arrow.right{right:10px}
.dots{display:flex;gap:6px;justify-content:center;padding:10px}
.dot{width:8px;height:8px;border-radius:10px;background:#767ab8;opacity:.6}
.dot.active{opacity:1;background:#b8baf7;box-shadow:0 0 0 3px rgba(184,186,247,.25)}
.counters{display:grid;gap:12px}
.counter{background:linear-gradient(180deg,#1a1f4a,#141a3a);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px 16px;}
.counter h4{margin:0 0 6px;font-size:16px}
.elapsed{font-weight:900;font-size:20px}
.since{display:inline-flex;align-items:center;gap:8px;font-size:12px;opacity:.85;background:#211d45;border:1px solid rgba(255,255,255,.06);padding:6px 10px;border-radius:999px;margin-top:8px}
.glam-title{font-weight:900;font-size:clamp(22px, 6.5vw, 34px);letter-spacing:.5px;background:linear-gradient(90deg, #ff80f2, #ffd166, #8be9fd, #ff80f2);-webkit-background-clip:text;background-clip:text;color:transparent;animation:shimmer 4s linear infinite;}
@keyframes shimmer{to{background-position:600px 0;}}
.glam-sub{font-weight:900;font-size:clamp(18px, 5.2vw, 26px);color:#fff;text-shadow:0 0 12px rgba(255,141,243,.35);animation:popIn 1.2s ease both;}
@keyframes popIn{0%{transform:translateY(8px) scale(.98);opacity:0}100%{transform:none;opacity:1}}
.signature{margin-top:18px;font-family:"GreatVibes", "Brush Script MT", "Segoe Script", cursive;font-size:clamp(26px, 8vw, 42px);background:linear-gradient(90deg, var(--gold), var(--gold-2), #fff7c2, var(--gold));-webkit-background-clip:text;background-clip:text;color:transparent;letter-spacing:.4px;filter:drop-shadow(0 0 10px rgba(255,216,117,.35));animation:goldPulse 3.5s ease-in-out infinite;}
@keyframes goldPulse{0%,100%{text-shadow:0 0 0px rgba(255,216,117,.0)}50%{text-shadow:0 0 18px rgba(255,216,117,.35)}}
a.whats{color:#ffd875;text-decoration:none;border-bottom:1px dashed rgba(255,255,255,.2);padding-bottom:1px}
a.whats:hover{filter:brightness(1.08)}
.heart{position:fixed;top:-10px;color:#ff4d6d;font-size:24px;pointer-events:none;animation:fall 6s linear infinite;}
@keyframes fall{0%{transform:translateY(-10px) translateX(0) rotate(0deg);opacity:1;}100%{transform:translateY(100vh) translateX(20px) rotate(360deg);opacity:0;}
}
</style>
</head>
<body>
  
<div class="hearts"></div>
<header>
  <h1 class="title">Brayan & Márcia <span class="spark">💖✨</span></h1>
  <nav class="nav" id="topNav">
    <a class="chip active" data-page="home"><svg viewBox="0 0 24 24" fill="none"><path d="M3 10.5 12 3l9 7.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-9.5Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg> Início</a>
    <a class="chip" data-page="momentos"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" rx="2" stroke="white" stroke-width="1.5"/><path d="m7 14 2.6-3 3.2 3.5L16 12l3 3" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg> Momentos</a>
    <a class="chip" data-page="playlist"><svg viewBox="0 0 24 24" fill="none"><path d="M5 7h12M5 12h12M5 17h7" stroke="white" stroke-width="1.6" stroke-linecap="round"/><circle cx="19" cy="17" r="2.2" fill="white"/></svg> Playlist</a>
    <a class="chip" data-page="caixinha"><svg viewBox="0 0 24 24" fill="none"><path d="M4 7h16v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7Z" stroke="white" stroke-width="1.5"/><path d="m4 7 8 6 8-6" stroke="white" stroke-width="1.5"/></svg> Caixinha</a>
    <a class="chip" data-page="finale"><svg viewBox="0 0 24 24" fill="none"><path d="M12 21s-7-4.4-7-10a4 4 0 0 1 7-2 4 4 0 0 1 7 2c0 5.6-7 10-7 10Z" stroke="white" stroke-width="1.5"/></svg> Grande Finale</a>
  </nav>
</header>

<main>
  <section class="page active" id="home">
    <h2 class="h1">Para sempre, nós dois. ✨</h2>
    <div class="card">
      <p class="muted" style="margin-top:0">Um cantinho feito com amor para guardar nossas memórias e sonhar com as próximas. 💞</p>
      <div class="counters" id="counters"></div>
      <div class="counter" style="margin-top:12px">
        <h4>Almas Unidas 💗</h4>
        <label style="display:block;margin:6px 0 10px;opacity:.85">
          Escolha uma data:
          <input id="dtSurpresa" type="date" style="margin-left:8px;background:#1b1f45;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:6px 10px">
        </label>
        <div class="elapsed" id="surpresaTxt">Defina uma data…</div>
      </div>
    </div>
    <section class="section">
      <h2 class="h1">Nossa Carta 💌</h2>
      <div class="card">
        <p style="font-size:clamp(16px, 4.5vw, 20px); line-height:1.9; margin:0">
          Esse site é dedicado ao amor da minha vida, nosso relacionamento, e principalmente você.
          Ele reflete toda minha paixão e amor por você durante todos esses anos. Venho fazendo essa declaração do
          nosso amor para eternizar ele pra sempre, isso é todo meu sentimento por você externado naquilo que
          gosto de fazer.
          <br><br>
          Eu sou seu companheiro, e pode contar comigo em todas as situações!
          <br><br>
          <strong>Eu amo você por toda a eternidade ♾️ ❤️!</strong>
        </p>
        <div class="signature">— Brayan</div>
      </div>
    </section>
  </section>

  <section class="page" id="momentos">
    <h2 class="h1">Momentos que marcaram nossa história ✨</h2>
    <div class="card" style="margin-bottom:18px">
      <h3 style="margin:0">Nós somos 1 só 💍</h3>
      <div class="slider" data-caption="Nós somos 1 só 💍"><div class="viewport" id="galeria-nos1"></div>
        <button class="arrow left"><svg viewBox="0 0 24 24" fill="none"><path d="M15 6 9 12l6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <button class="arrow right"><svg viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <div class="dots"></div>
      </div>
    </div>
    <div class="card" style="margin-bottom:18px">
      <h3 style="margin:0">Completamos aquilo que falta um no outro 🧩✨</h3>
      <div class="slider" data-caption="Completamos aquilo que falta um no outro 🧩✨"><div class="viewport" id="galeria-completa"></div>
        <button class="arrow left"><svg viewBox="0 0 24 24" fill="none"><path d="M15 6 9 12l6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <button class="arrow right"><svg viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <div class="dots"></div>
      </div>
    </div>
    <div class="card" style="margin-bottom:18px">
      <h3 style="margin:0">Aquilo que nos Une 🔗</h3>
      <div class="slider" data-caption="Aquilo que nos Une 🔗"><div class="viewport" id="galeria-simbolo"></div>
        <button class="arrow left"><svg viewBox="0 0 24 24" fill="none"><path d="M15 6 9 12l6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <button class="arrow right"><svg viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <div class="dots"></div>
      </div>
    </div>
  </section>

  <section class="page" id="playlist">
    <h2 class="h1">Playlist 🎵</h2>
    <div class="card" style="margin-bottom:16px">
      <div class="center muted" style="margin-bottom:10px">Sua playlist do Spotify</div>
      <div style="border-radius:12px;overflow:hidden">
        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/6IaFWICPryXprEvjpQwUa2?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      </div>
    </div>
    <div class="card">
      <h3 style="margin-top:0">Adicionar música</h3>
      <p class="muted" style="margin-top:-6px">Cole um link do YouTube ou Spotify (música/álbum). Ele aparecerá na lista abaixo.</p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px">
        <input id="musicUrl" placeholder="https://..." style="flex:1;min-width:220px;background:#1b1f45;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:10px 12px"/>
        <button class="btn" id="addMusicBtn">Adicionar</button>
        <button class="btn btn-ghost" id="clearMusicBtn">Limpar lista</button>
      </div>
      <div id="musicList" class="counters"></div>
    </div>
  </section>

  <section class="page" id="caixinha">
    <h2 class="h1">Caixinha do Amor 💌</h2>
    <div class="card">
      <div style="display:grid;gap:10px">
        <input id="cxNome" placeholder="Seu nome (opcional)" style="background:#1b1f45;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:10px 12px"/>
        <textarea id="cxMsg" rows="4" placeholder="Escreva sua sugestão, reclamação fofinha ou elogio 💕" style="background:#1b1f45;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px 12px;resize:vertical"></textarea>
        <div><button class="btn" id="btnEnviarCx">Enviar</button><button class="btn btn-ghost" id="btnLimparCx">Limpar</button></div>
      </div>
      <hr style="border:none;border-top:1px solid rgba(255,255,255,.08);margin:16px 0">
      <div id="listaCx" class="counters"></div>
    </div>
  </section>

  <section class="page" id="finale">
    <h2 class="h1">Nosso Grande Finale ✨</h2>
    <div class="card" style="margin-bottom:18px;border-color:rgba(255,141,243,.35);box-shadow:0 10px 40px rgba(255,141,243,.15), 0 0 0 1px rgba(255,255,255,.05) inset;">
      <h3 class="glam-title center">Grande Finale ✨</h3>
      <p class="center glam-sub" style="margin:6px 0 14px">E no final, o mais importante é você ❤️</p>
      <div class="slider" data-caption="E no final, o mais importante é você ❤️">
        <div class="viewport" id="galeria-dela"></div>
        <button class="arrow left"><svg viewBox="0 0 24 24" fill="none"><path d="M15 6 9 12l6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <button class="arrow right"><svg viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        <div class="dots"></div>
      </div>
    </div>
    <div class="card center" style="border:1px solid rgba(255,215,0,.35);box-shadow:0 10px 30px rgba(255,215,0,.15)">
      <h3 class="glam-title" style="margin:0 0 8px">Conte comigo sempre ✨</h3>
      <div style="display:inline-block;padding:10px 16px;border-radius:999px;background:linear-gradient(180deg,#1f1a45,#151a3a);border:1px solid rgba(255,255,255,.12);font-weight:900;letter-spacing:.5px;animation:softPulse 3s ease-in-out infinite">
        <a class="whats" href="https://wa.me/5511986897178" target="_blank" rel="noopener">(11) 98689-7178</a>
      </div>
    </div>
  </section>
</main>
<script>
/* ===== NAVEGAÇÃO ENTRE PÁGINAS ===== */
const navLinks = [...document.querySelectorAll("#topNav .chip")];
function setActiveTab(page){ document.querySelectorAll('#topNav .chip').forEach(ch=>{ ch.classList.toggle('active', ch.dataset.page===page); }); }
function show(page){
  const next = document.getElementById(page);
  if(!next) return;
  const current = document.querySelector('.page.active');
  try{ localStorage.setItem('lastPage', page); }catch(e){}
  if(current && current !== next){
    current.classList.add('leaving');
    setTimeout(()=>{ current.classList.remove('active','leaving'); next.classList.add('active'); setActiveTab(page); window.scrollTo({top:0, behavior:'smooth'}); }, 350);
  }else{ next.classList.add('active'); setActiveTab(page); window.scrollTo({top:0, behavior:'smooth'}); }
}
navLinks.forEach(a => a.addEventListener("click", (e)=>{ e.preventDefault(); show(a.dataset.page); }));
show(localStorage.getItem('lastPage') || 'home');

/* ===== CONTADORES DE TEMPO ===== */
const countersEl = document.getElementById('counters');
const eventos = [ { titulo:'Nosso Reencontro 🫶', data:'2024-05-27' }, { titulo:'Nossa União ❤️', data:'2024-12-25' } ];
function fmt2(n){return n.toString().padStart(2,'0');}
function tickElapsed(startISO){ const start = new Date(startISO); const now = new Date(); let diff = Math.max(0, now - start); const days = Math.floor(diff / 86400000); diff -= days*86400000; const h = Math.floor(diff/3600000); diff -= h*3600000; const m = Math.floor(diff/60000); diff -= m*60000; const s = Math.floor(diff/1000); return {days,h,m,s}; }
function renderCounters(){ countersEl.innerHTML = ''; eventos.forEach(ev=>{ const box = document.createElement('div'); box.className = 'counter'; box.innerHTML = `<h4>${ev.titulo}</h4><div class="elapsed" data-date="${ev.data}">—</div><div class="since"><span>Desde</span> <strong>${ev.data.split('-').reverse().join('/')}</strong></div>`; countersEl.appendChild(box); }); }
renderCounters();
function animateElapsed(){ document.querySelectorAll('.elapsed[data-date]').forEach(el=>{ const {days,h,m,s} = tickElapsed(el.dataset.date); el.textContent = `Já se passaram ${days} dias • ${fmt2(h)}:${fmt2(m)}:${fmt2(s)} 💞`; }); setTimeout(animateElapsed, 1000); }
animateElapsed();

/* ===== CONTADOR SURPRESA ===== */
const dt = document.getElementById('dtSurpresa');
const sp = document.getElementById('surpresaTxt');
dt.addEventListener('change', ()=>{ if(!dt.value){ sp.textContent='Defina uma data…'; localStorage.removeItem('surpresa'); return;} localStorage.setItem('surpresa', dt.value); });
(function initSurpresa(){ const saved = localStorage.getItem('surpresa'); if(saved){ dt.value = saved; } function tick(){ if(!dt.value){ sp.textContent='Defina uma data…'; return; } const target = new Date(dt.value); const now = new Date(); let delta = target - now; const future = delta >= 0; delta = Math.abs(delta); const d = Math.floor(delta/86400000); const h = Math.floor(delta/3600000)%24; const m = Math.floor(delta/60000)%60; const s = Math.floor(delta/1000)%60; sp.textContent = (future? 'Faltam ':'Já se passaram ') + `${d} dias • ${fmt2(h)}:${fmt2(m)}:${fmt2(s)}`; } setInterval(tick, 1000); tick(); })();

/* ===== LÓGICA DO CARROSSEL (SLIDER) ===== */
const sliders = [];
function initSlider(wrapper) { const viewport = wrapper.querySelector('.viewport'); const dotsBox = wrapper.querySelector('.dots'); let idx = 0, intervalID = null; function createSlide(src, caption) { const slide = document.createElement('div'); slide.className = 'slide'; slide.innerHTML = `<img src="${src}" alt="${caption}" loading="lazy"><div class="caption">${caption}</div>`; return slide; } function setActive(i) { const slides = viewport.querySelectorAll('.slide'); if (slides.length === 0) return; idx = (i + slides.length) % slides.length; slides.forEach((s, k) => s.classList.toggle('active', k === idx)); dotsBox.querySelectorAll('.dot').forEach((d, k) => d.classList.toggle('active', k === idx)); } function startAutoplay() { stopAutoplay(); if (viewport.querySelectorAll('.slide').length > 1) { intervalID = setInterval(() => setActive(idx + 1), 5000); } } function stopAutoplay() { clearInterval(intervalID); } wrapper.querySelector('.arrow.left').addEventListener('click', () => { setActive(idx - 1); startAutoplay(); }); wrapper.querySelector('.arrow.right').addEventListener('click', () => { setActive(idx + 1); startAutoplay(); }); let x0 = null; viewport.addEventListener('touchstart', e => { x0 = e.touches[0].clientX; stopAutoplay(); }, { passive: true }); viewport.addEventListener('touchend', e => { if (x0 === null) return; if (Math.abs(e.changedTouches[0].clientX - x0) > 40) { setActive(idx + (e.changedTouches[0].clientX < x0 ? 1 : -1)); } x0 = null; startAutoplay(); }); return { load(images, caption) { viewport.innerHTML = ''; dotsBox.innerHTML = ''; if(images.length === 0){ viewport.innerHTML = `<div style="display:grid;place-items:center;height:100%;color:var(--muted);">Nenhuma imagem encontrada para esta galeria.</div>`; return; } images.forEach((src, k) => { viewport.appendChild(createSlide(src, caption)); const d = document.createElement('div'); d.className = 'dot'; d.addEventListener('click', () => { setActive(k); startAutoplay(); }); dotsBox.appendChild(d); }); setActive(0); startAutoplay(); } }; }
document.querySelectorAll('.slider').forEach(s => sliders.push({ el: s, api: initSlider(s) }));

/* ===== CARREGADOR AUTOMÁTICO DE IMAGENS ===== */
document.addEventListener('DOMContentLoaded', async () => {
  const SERIES = [ { id: 'galeria-nos1', prefix: 'nos-somos-1-', caption: 'Nós somos 1 só 💍' }, { id: 'galeria-completa', prefix: 'completamos-', caption: 'Completamos aquilo que falta um no outro 🧩✨' }, { id: 'galeria-simbolo', prefix: 'aquilo-que-nos-une-', caption: 'Aquilo que nos Une 🔗' }, { id: 'galeria-dela', prefix: 'finale-', caption: 'E no final, o mais importante é você ❤️' }, ];
  const exts = ['.jpg', '.jpeg', '.JPG', '.JPEG', '.png', '.webp'];
  const pad2 = n => String(n).padStart(2, '0');
  function tryLoad(src) { return new Promise(resolve => { const img = new Image(); img.onload = () => resolve(src); img.onerror = () => resolve(null); img.src = src; }); }
  async function collectImages(prefix, max = 200) { const found = []; let consecutiveMisses = 0; for (let i = 1; i <= max; i++) { let imageFound = null; for (const ext of exts) { const src = `imagens/${prefix}${pad2(i)}${ext}`; imageFound = await tryLoad(src); if (imageFound) break; } if (imageFound) { found.push(imageFound); consecutiveMisses = 0; } else { consecutiveMisses++; if (consecutiveMisses >= 5) break; } } return found; }
  for (const s of SERIES) { const sliderInstance = sliders.find(slider => slider.el.querySelector('.viewport').id === s.id); if (sliderInstance) { const images = await collectImages(s.prefix); sliderInstance.api.load(images, s.caption); } }
});

/* ===== PLAYLIST, CAIXINHA & EFEITOS ===== */
const musicKey = 'playlist:extras'; const listEl = document.getElementById('musicList'); function renderMusic(){ const arr = JSON.parse(localStorage.getItem(musicKey) || '[]'); listEl.innerHTML = ''; arr.forEach((url, i)=>{ const isSpotify = url.includes('spotify'); const isYoutube = url.includes('youtube') || url.includes('youtu.be'); const card = document.createElement('div'); card.className = 'counter'; let embedHtml = ''; if(isSpotify){ embedHtml = `<iframe style="border-radius:12px" src="${url.replace('open.spotify.com/','open.spotify.com/embed/')}" width="100%" height="152" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>`; } else if (isYoutube) { const videoId = url.split('v=')[1]?.split('&')[0] || url.split('/').pop(); embedHtml = `<iframe width="100%" height="220" src="https://www.youtube.com/embed/${videoId}" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`; } card.innerHTML = `<h4>${isSpotify ? 'Spotify' : (isYoutube ? 'YouTube' : 'Link')} • item ${i+1}</h4><div class="muted" style="margin:6px 0 10px;word-break:break-all">${url}</div>${embedHtml}<div style="margin-top:10px"><button class="btn btn-ghost" data-del="${i}">Remover</button></div>`; listEl.appendChild(card); }); listEl.querySelectorAll('[data-del]').forEach(b=> b.addEventListener('click', ()=>{ const arr = JSON.parse(localStorage.getItem(musicKey) || '[]'); arr.splice(+b.dataset.del,1); localStorage.setItem(musicKey, JSON.stringify(arr)); renderMusic(); })); }
renderMusic();
document.getElementById('addMusicBtn').addEventListener('click', ()=>{ const url = document.getElementById('musicUrl').value.trim(); if(!url) return; const arr = JSON.parse(localStorage.getItem(musicKey) || '[]'); arr.push(url); localStorage.setItem(musicKey, JSON.stringify(arr)); document.getElementById('musicUrl').value = ''; renderMusic(); });
document.getElementById('clearMusicBtn').addEventListener('click', ()=>{ localStorage.removeItem(musicKey); renderMusic(); });
const cxKey = 'caixinha:msgs'; const listaCx = document.getElementById('listaCx'); function renderCx(){ const arr = JSON.parse(localStorage.getItem(cxKey) || '[]'); listaCx.innerHTML = ''; arr.forEach( ({nome,msg,data},i) => { const el = document.createElement('div'); el.className='counter'; el.innerHTML = `<h4>${nome || 'Anônimo'} • <span class="muted">${new Date(data).toLocaleString()}</span></h4><div>${msg.replace(/[<>&]/g,s=>({'<':'&lt;','>':'&gt;','&':'&amp;'}[s]))}</div><div style="margin-top:10px"><button class="btn btn-ghost" data-del="${i}">Apagar</button></div>`; listaCx.appendChild(el); }); listaCx.querySelectorAll('[data-del]').forEach(btn=> btn.addEventListener('click', ()=>{ const arr = JSON.parse(localStorage.getItem(cxKey) || '[]'); arr.splice(+btn.dataset.del,1); localStorage.setItem(cxKey, JSON.stringify(arr)); renderCx(); })); }
renderCx();
document.getElementById('btnEnviarCx').addEventListener('click', ()=>{ const nome = document.getElementById('cxNome').value.trim(); const msg = document.getElementById('cxMsg').value.trim(); if(!msg) return; const arr = JSON.parse(localStorage.getItem(cxKey) || '[]'); arr.unshift({nome, msg, data: Date.now()}); localStorage.setItem(cxKey, JSON.stringify(arr)); document.getElementById('cxMsg').value=''; renderCx(); });
document.getElementById('btnLimparCx').addEventListener('click', ()=>{ localStorage.removeItem(cxKey); renderCx(); });
document.querySelectorAll('#topNav .chip').forEach(chip=>{ chip.addEventListener('click', ()=>{ chip.classList.add('bump'); setTimeout(()=>chip.classList.remove('bump'), 320); const span = document.createElement('span'); span.className='heart-pop'; span.textContent = ['💖','💞','💘'][Math.floor(Math.random()*3)]; chip.appendChild(span); setTimeout(()=>span.remove(), 900); }, {passive:true}); });
function createHeart() { const heart = document.createElement('div'); heart.className = 'heart'; heart.innerText = '❤'; heart.style.left = Math.random() * 100 + 'vw'; heart.style.animationDuration = (Math.random() * 3 + 4) + 's'; heart.style.fontSize = (12 + Math.random() * 18) + 'px'; document.body.appendChild(heart); setTimeout(() => heart.remove(), 7000); }
setInterval(createHeart, 800);
</script>
</body>
</html>